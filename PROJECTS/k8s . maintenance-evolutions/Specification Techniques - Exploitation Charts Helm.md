---
created: 2025-11-12 - 17-00
tags:
  - k8s
  - bitnami
---

# Document d’exigences – Gestion et exploitation de charts Helm

## 1. Contexte et objectifs

L’organisation souhaite confier à un prestataire la **création, la maintenance et la gestion opérationnelle** de charts Helm pour une liste de produits applicatifs internes et tiers.  
Les charts doivent être hébergés dans notre infrastructure interne (**Harbor**).  

L’objectif est de garantir :
- une **standardisation** des déploiements Kubernetes,
- une **sécurité et conformité** renforcées (gestion des vulnérabilités, CVE),
- une **traçabilité et fiabilité** des mises à jour,
- et un **service d’exploitation continu**.

---

## 2. Périmètre

### 2.1 Produits concernés
La prestation portera sur un portefeuille de produits, par exemple :
- RabbitMQ  
- PostgreSQL  
- Redis  
- NGINX Ingress Controller  
- Keycloak  
- Prometheus / Grafana  

(La liste complète sera fournie au lancement du projet.)

### 2.2 Environnements
- **Développement**, **staging**, **production**  
- Clusters Kubernetes hébergés dans notre infrastructure (on-prem ou cloud privé)  
- Gestion des charts via un **repository Helm privé Harbor**

---

## 3. Prestations attendues

### 3.1 Création et maintenance des charts
- Création ou adaptation de charts Helm pour chaque produit listé.  
- Conformité à nos standards (labels, annotations, conventions de ressources, valeurs par défaut).  
- Structuration des charts (subcharts, dépendances, schéma `values.schema.json`).  
- Tests de rendu (`helm lint`, `helm template`) et tests de déploiement automatisés (CI/CD).

### 3.2 Hébergement et gestion du dépôt Harbor
- Publication et versioning des charts dans un **Harbor interne**.  
- Gestion des accès et des permissions.  
- Rétention et archivage des versions obsolètes.  
- Documentation d’utilisation et indexation des charts.

### 3.3 Maintenance et mise à jour
- Veille continue sur les versions amont des charts et images.  
- Mise à jour proactive selon une politique convenue :
  - **Critique (CVE haute / faille sécurité)** → correction sous *x* jours ouvrés.  
  - **Évolutive (nouvelle version mineure/majeure)** → revue et planification.  
- Rétrocompatibilité assurée et notes de version détaillées.

### 3.4 Gestion des vulnérabilités (CVE)
- Intégration d’un **scanner d’images et de charts** (Trivy, Grype, Harbor scanner).  
- Rapports réguliers (mensuels) sur les vulnérabilités détectées.  
- Proposition et mise en œuvre de correctifs.  
- Processus de validation interne avant mise en production.

### 3.5 Gouvernance et documentation
- Fiches de configuration pour chaque chart (variables, paramètres exposés).  
- Guide de déploiement et d’exploitation (Helm install/upgrade/rollback).  
- Politique de versionnage (SemVer).  
- Tableau de suivi des releases et des CVE.

### 3.6 Support et exploitation
- Support N2/N3 sur les déploiements Helm.  
- Assistance à la résolution d’incidents liés à l’installation ou à la mise à jour.  
- Suivi des pipelines CI/CD associés.  
- Option : mise à disposition d’un dashboard de supervision (versions, statuts).

---

## 4. Exigences techniques

| Domaine | Exigence |
|----------|----------|
| **Standard Helm** | Helm ≥ 3.14, charts compatibles Kubernetes ≥ 1.28 |
| **Repo** | Harbor interne (authentification OIDC, HTTPS obligatoire) |
| **CI/CD** | Intégration GitLab CI ou GitHub Actions |
| **Conformité** | Linting automatisé, tests unitaires des templates |
| **Sécurité** | Scans d’images et de charts automatisés |
| **Traçabilité** | Signature des charts (`helm provenance`, provenance file) |
| **Observabilité** | Support des ServiceMonitors/PodMonitors |
| **Configuration** | Validation via `values.schema.json` |
| **Documentation** | Chart README.md complet et mis à jour |

---

## 5. Livrables attendus

- Charts Helm (sources + packages `.tgz`)  
- Documentation technique et opérationnelle  
- Scripts CI/CD de publication  
- Rapports de vulnérabilité et tableaux de suivi  
- Tableau de bord des versions  
- Guide de maintenance et plan de mise à jour

---

## 6. Exigences organisationnelles

- Processus de **validation des changements** (merge requests, revue par notre équipe).  
- Reporting mensuel sur :
  - mises à jour effectuées,  
  - incidents,  
  - vulnérabilités détectées,  
  - roadmap d’évolution.  
- Présence d’un **référent technique** (contact unique).  
- Engagement de **confidentialité** sur les charts et l’infrastructure.

---

## 7. Critères d’évaluation de l’offre

- Expérience du prestataire sur Helm, Kubernetes, CI/CD, et Harbor.  
- Capacité à industrialiser la gestion des charts (GitOps, automation).  
- Démarche qualité (tests, validation, sécurité).  
- SLA proposés pour la correction des vulnérabilités.  
- Transparence de la facturation (forfait / régie).  
- Outils et pratiques documentées.

---

## 8. Modalités de réponse

Les prestataires sont invités à fournir :
- Une proposition technique détaillée.  
- Une estimation de charge et de planning.  
- Un plan de gouvernance (suivi, communication).  
- Un exemple de chart Helm maintenu.  
- Un devis financier détaillé (par lot ou produit).

---

